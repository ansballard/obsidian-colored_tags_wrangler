import { __awaiter } from "tslib";
import { defaultSettings } from "../../settings/DefaultSettings";
import { ServiceProvider } from "../../ServiceProvider";
export function migrate_14_to_15(loaded_data) {
    return __awaiter(this, void 0, void 0, function* () {
        let new_data = Object.assign({}, defaultSettings); // TODO this is dangerous, change this to a specific pattern!
        // ingest the .old data
        new_data.TagColors = loaded_data.TagColors.ColorPicker.map((old_tag) => {
            const newTagColor = ServiceProvider.tagRecords.getDefaultRecord();
            newTagColor.core_tagText = old_tag.tag_name;
            newTagColor.core_color_foreground = Object.assign(Object.assign({}, old_tag.color), { a: 1. });
            newTagColor.core_color_background = Object.assign(Object.assign({}, old_tag.background_color), { a: 1. });
            return newTagColor;
        });
        new_data.Info.SettingsVersion = 15;
        return new_data;
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlncmF0ZV8xNF90b18xNS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1pZ3JhdGVfMTRfdG9fMTUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU9BLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMvRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFZdEQsTUFBTSxVQUFnQixnQkFBZ0IsQ0FBQyxXQUEwQjs7UUFDN0QsSUFBSSxRQUFRLEdBQXFCLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsNkRBQTZEO1FBRXJJLHVCQUF1QjtRQUN2QixRQUFRLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FDekQsQ0FBQyxPQUF5QixFQUFFLEVBQUU7WUFDN0IsTUFBTSxXQUFXLEdBQXNCLGVBQWUsQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUVyRixXQUFXLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDNUMsV0FBVyxDQUFDLHFCQUFxQixtQ0FBTyxPQUFPLENBQUMsS0FBSyxLQUFFLENBQUMsRUFBRSxFQUFFLEdBQUMsQ0FBQztZQUM5RCxXQUFXLENBQUMscUJBQXFCLG1DQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsS0FBRSxDQUFDLEVBQUUsRUFBRSxHQUFDLENBQUM7WUFFekUsT0FBTyxXQUFXLENBQUM7UUFDcEIsQ0FBQyxDQUNELENBQUM7UUFFRixRQUFRLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDaEMsT0FBTyxRQUFzQyxDQUFDO0lBQ2xELENBQUM7Q0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBJbXBvcnRzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5pbXBvcnQge0lTZXR0aW5nc192MDE0fSBmcm9tIFwiLi4vc2V0dGluZ192ZXJzaW9uc1wiO1xyXG5pbXBvcnQge0lQbHVnaW5TZXR0aW5nc30gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbnRyYWN0cy9wbHVnaW4vc2V0dGluZ3MvSVBsdWdpblNldHRpbmdzXCI7XHJcbmltcG9ydCB7SUNvbG9yZWRUYWdSZWNvcmR9IGZyb20gXCIuLi8uLi8uLi8uLi9jb250cmFjdHMvcGx1Z2luL3NldHRpbmdzL0lDb2xvcmVkVGFnUmVjb3JkXCI7XHJcbmltcG9ydCB7UkdCfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHtkZWZhdWx0U2V0dGluZ3N9IGZyb20gXCIuLi8uLi9zZXR0aW5ncy9EZWZhdWx0U2V0dGluZ3NcIjtcclxuaW1wb3J0IHtTZXJ2aWNlUHJvdmlkZXJ9IGZyb20gXCIuLi8uLi9TZXJ2aWNlUHJvdmlkZXJcIjtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBDb2RlXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5pbnRlcmZhY2UgT0xEX0lDb2xvclBpY2tlciB7XHJcblx0dGFnX25hbWU6c3RyaW5nLFxyXG5cdGNvbG9yOlJHQixcclxuXHRiYWNrZ3JvdW5kX2NvbG9yOlJHQixcclxuXHRsdW1pbmFuY2Vfb2Zmc2V0Om51bWJlclxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZV8xNF90b18xNShsb2FkZWRfZGF0YTpJU2V0dGluZ3NfdjAxNCk6UHJvbWlzZTxJUGx1Z2luU2V0dGluZ3M+IHtcclxuICAgIGxldCBuZXdfZGF0YSA6IElQbHVnaW5TZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncyk7IC8vIFRPRE8gdGhpcyBpcyBkYW5nZXJvdXMsIGNoYW5nZSB0aGlzIHRvIGEgc3BlY2lmaWMgcGF0dGVybiFcclxuXHJcblx0Ly8gaW5nZXN0IHRoZSAub2xkIGRhdGFcclxuXHRuZXdfZGF0YS5UYWdDb2xvcnMgPSBsb2FkZWRfZGF0YS5UYWdDb2xvcnMuQ29sb3JQaWNrZXIubWFwKFxyXG5cdFx0KG9sZF90YWc6IE9MRF9JQ29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0Y29uc3QgbmV3VGFnQ29sb3I6IElDb2xvcmVkVGFnUmVjb3JkID0gU2VydmljZVByb3ZpZGVyLnRhZ1JlY29yZHMuZ2V0RGVmYXVsdFJlY29yZCgpO1xyXG5cclxuXHRcdFx0bmV3VGFnQ29sb3IuY29yZV90YWdUZXh0ID0gb2xkX3RhZy50YWdfbmFtZTtcclxuXHRcdFx0bmV3VGFnQ29sb3IuY29yZV9jb2xvcl9mb3JlZ3JvdW5kID0gey4uLm9sZF90YWcuY29sb3IsIGE6IDEufTtcclxuXHRcdFx0bmV3VGFnQ29sb3IuY29yZV9jb2xvcl9iYWNrZ3JvdW5kID0gey4uLm9sZF90YWcuYmFja2dyb3VuZF9jb2xvciwgYTogMS59O1xyXG5cclxuXHRcdFx0cmV0dXJuIG5ld1RhZ0NvbG9yO1xyXG5cdFx0fVxyXG5cdCk7XHJcblxyXG5cdG5ld19kYXRhLkluZm8uU2V0dGluZ3NWZXJzaW9uID0gMTU7XHJcbiAgICByZXR1cm4gbmV3X2RhdGEgYXMgdW5rbm93biBhcyBJUGx1Z2luU2V0dGluZ3M7XHJcbn1cclxuIl19