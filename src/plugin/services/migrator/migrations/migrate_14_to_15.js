import { __awaiter } from "tslib";
import { defaultSettings } from "../../settings/DefaultSettings";
import { ServiceProvider } from "../../ServiceProvider";
export function migrate_14_to_15(loaded_data) {
    return __awaiter(this, void 0, void 0, function* () {
        let new_data = Object.assign({}, defaultSettings); // TODO this is dangerous, change this to a specific pattern!
        // ingest the old data
        new_data.TagColors = loaded_data.TagColors.ColorPicker.map((old_tag) => {
            const newTagColor = ServiceProvider.tagRecords.getDefaultRecord();
            newTagColor.core_tagText = old_tag.tag_name;
            newTagColor.core_color_foreground = Object.assign(Object.assign({}, old_tag.color), { a: 1. });
            newTagColor.core_color_background = Object.assign(Object.assign({}, old_tag.background_color), { a: 1. });
            return newTagColor;
        });
        new_data.Info.SettingsVersion = 15;
        return new_data;
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlncmF0ZV8xNF90b18xNS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1pZ3JhdGVfMTRfdG9fMTUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU9BLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMvRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFZdEQsTUFBTSxVQUFnQixnQkFBZ0IsQ0FBQyxXQUEwQjs7UUFDN0QsSUFBSSxRQUFRLEdBQXFCLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsNkRBQTZEO1FBRXJJLHNCQUFzQjtRQUN0QixRQUFRLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FDekQsQ0FBQyxPQUF5QixFQUFFLEVBQUU7WUFDN0IsTUFBTSxXQUFXLEdBQXNCLGVBQWUsQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUVyRixXQUFXLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDNUMsV0FBVyxDQUFDLHFCQUFxQixtQ0FBTyxPQUFPLENBQUMsS0FBSyxLQUFFLENBQUMsRUFBRSxFQUFFLEdBQUMsQ0FBQztZQUM5RCxXQUFXLENBQUMscUJBQXFCLG1DQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsS0FBRSxDQUFDLEVBQUUsRUFBRSxHQUFDLENBQUM7WUFFekUsT0FBTyxXQUFXLENBQUM7UUFDcEIsQ0FBQyxDQUNELENBQUM7UUFFRixRQUFRLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDaEMsT0FBTyxRQUFzQyxDQUFDO0lBQ2xELENBQUM7Q0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBJbXBvcnRzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5pbXBvcnQge0lTZXR0aW5nc192MDE0fSBmcm9tIFwiLi4vc2V0dGluZ192ZXJzaW9uc1wiO1xyXG5pbXBvcnQge0lQbHVnaW5TZXR0aW5nc30gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbnRyYWN0cy9wbHVnaW4vc2V0dGluZ3MvSVBsdWdpblNldHRpbmdzXCI7XHJcbmltcG9ydCB7SUNvbG9yZWRUYWdSZWNvcmR9IGZyb20gXCIuLi8uLi8uLi8uLi9jb250cmFjdHMvcGx1Z2luL3NldHRpbmdzL0lDb2xvcmVkVGFnUmVjb3JkXCI7XHJcbmltcG9ydCB7UkdCfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHtkZWZhdWx0U2V0dGluZ3N9IGZyb20gXCIuLi8uLi9zZXR0aW5ncy9EZWZhdWx0U2V0dGluZ3NcIjtcclxuaW1wb3J0IHtTZXJ2aWNlUHJvdmlkZXJ9IGZyb20gXCIuLi8uLi9TZXJ2aWNlUHJvdmlkZXJcIjtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBDb2RlXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5pbnRlcmZhY2UgT0xEX0lDb2xvclBpY2tlciB7XHJcblx0dGFnX25hbWU6c3RyaW5nLFxyXG5cdGNvbG9yOlJHQixcclxuXHRiYWNrZ3JvdW5kX2NvbG9yOlJHQixcclxuXHRsdW1pbmFuY2Vfb2Zmc2V0Om51bWJlclxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZV8xNF90b18xNShsb2FkZWRfZGF0YTpJU2V0dGluZ3NfdjAxNCk6UHJvbWlzZTxJUGx1Z2luU2V0dGluZ3M+IHtcclxuICAgIGxldCBuZXdfZGF0YSA6IElQbHVnaW5TZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRTZXR0aW5ncyk7IC8vIFRPRE8gdGhpcyBpcyBkYW5nZXJvdXMsIGNoYW5nZSB0aGlzIHRvIGEgc3BlY2lmaWMgcGF0dGVybiFcclxuXHJcblx0Ly8gaW5nZXN0IHRoZSBvbGQgZGF0YVxyXG5cdG5ld19kYXRhLlRhZ0NvbG9ycyA9IGxvYWRlZF9kYXRhLlRhZ0NvbG9ycy5Db2xvclBpY2tlci5tYXAoXHJcblx0XHQob2xkX3RhZzogT0xEX0lDb2xvclBpY2tlcikgPT4ge1xyXG5cdFx0XHRjb25zdCBuZXdUYWdDb2xvcjogSUNvbG9yZWRUYWdSZWNvcmQgPSBTZXJ2aWNlUHJvdmlkZXIudGFnUmVjb3Jkcy5nZXREZWZhdWx0UmVjb3JkKCk7XHJcblxyXG5cdFx0XHRuZXdUYWdDb2xvci5jb3JlX3RhZ1RleHQgPSBvbGRfdGFnLnRhZ19uYW1lO1xyXG5cdFx0XHRuZXdUYWdDb2xvci5jb3JlX2NvbG9yX2ZvcmVncm91bmQgPSB7Li4ub2xkX3RhZy5jb2xvciwgYTogMS59O1xyXG5cdFx0XHRuZXdUYWdDb2xvci5jb3JlX2NvbG9yX2JhY2tncm91bmQgPSB7Li4ub2xkX3RhZy5iYWNrZ3JvdW5kX2NvbG9yLCBhOiAxLn07XHJcblxyXG5cdFx0XHRyZXR1cm4gbmV3VGFnQ29sb3I7XHJcblx0XHR9XHJcblx0KTtcclxuXHJcblx0bmV3X2RhdGEuSW5mby5TZXR0aW5nc1ZlcnNpb24gPSAxNTtcclxuICAgIHJldHVybiBuZXdfZGF0YSBhcyB1bmtub3duIGFzIElQbHVnaW5TZXR0aW5ncztcclxufVxyXG4iXX0=